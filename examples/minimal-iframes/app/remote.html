<!doctype html>
<html>
  <body>
    <div id="root">
      <ui-banner>This page was rendered 0 seconds ago.</ui-banner>
    </div>

    <script type="module">
      import {RemoteElement} from '@remote-dom/core/elements';

      class UIBanner extends RemoteElement {
        // For full details on defining remote elements, see the documentation
        // for `@remote-dom/core/elements`:
        // https://github.com/Shopify/remote-ui/tree/main/packages/core/
        static get remoteProperties() {
          return {
            tone: {type: String},
          };
        }
      }

      customElements.define('ui-banner', UIBanner);
    </script>

    <script type="module">
      import {RemoteMutationObserver} from '@remote-dom/core/elements';

      const root = document.querySelector('#root');
      const banner = root.querySelector('ui-banner');
      const initialContent = banner.textContent;

      let count = 0;

      setInterval(() => {
        count += 1;

        banner.textContent = initialContent.replace(
          '0 seconds',
          `${count} second${count === 1 ? '' : 's'}`,
        );

        if (count === 10) {
          banner.setAttribute('tone', 'warning');
        }
      }, 1000);

      const observer = new RemoteMutationObserver((mutations) => {
        window.parent.postMessage(mutations, '*');
      });

      observer.observe(root);
    </script>
  </body>
</html>
